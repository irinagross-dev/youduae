# ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å—Ç–∞—Ç—É—Å–µ –æ—Ç–∫–ª–∏–∫–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã!

## üéØ –ü—Ä–æ–±–ª–µ–º–∞

–ü–æ—Å–ª–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è –æ—Ç–∫–ª–∏–∫–∞ (decline-offer) Customer (–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å) –ø—Ä–æ–¥–æ–ª–∂–∞–ª –≤–∏–¥–µ—Ç—å –∑–µ–ª—ë–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:
```
‚úÖ –ó–∞—è–≤–∫–∞ –ø—Ä–∏–Ω—è—Ç–∞!
–î–æ–∂–¥–∏—Ç–µ—Å—å –æ—Ç–≤–µ—Ç–∞ –æ—Ç –∑–∞–∫–∞–∑—á–∏–∫–∞...
```

–≠—Ç–æ –≤–≤–æ–¥–∏–ª–æ –≤ –∑–∞–±–ª—É–∂–¥–µ–Ω–∏–µ - –æ—Ç–∫–ª–∏–∫ –±—ã–ª –æ—Ç–∫–ª–æ–Ω—ë–Ω, –Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —ç—Ç–æ–≥–æ –Ω–µ –∑–Ω–∞–ª.

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ —Å—Ç–∞—Ç—É—Å–æ–≤ –æ—Ç–∫–ª–∏–∫–æ–≤ —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏ –¥–ª—è Customer.

### Backend –∏–∑–º–µ–Ω–µ–Ω–∏—è:

**`server/api/check-my-offer.js`**
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `offerStatus` –≤ –æ—Ç–≤–µ—Ç API
- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ `lastTransition`:
  - `transition/decline-offer` ‚Üí `declined`
  - `transition/accept-offer` ‚Üí `accepted`
  - `transition/inquire` ‚Üí `pending`
  - `transition/complete` ‚Üí `completed`

### Frontend –∏–∑–º–µ–Ω–µ–Ω–∏—è:

**`src/components/OfferForm.jsx`**
- –î–æ–±–∞–≤–ª–µ–Ω state `offerStatus`
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã 4 —Ç–∏–ø–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Å —Ä–∞–∑–Ω—ã–º–∏ —Ü–≤–µ—Ç–∞–º–∏ –∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏

---

## üé® –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è Customer

### 1. ‚ùå –û—Ç–∫–ª–∏–∫ –æ—Ç–∫–ª–æ–Ω—ë–Ω (declined)

**–¶–≤–µ—Ç:** –ö—Ä–∞—Å–Ω—ã–π —Ñ–æ–Ω (#fee2e2)

```
‚ùå –û—Ç–∫–ª–∏–∫ –æ—Ç–∫–ª–æ–Ω—ë–Ω

–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –∑–∞–∫–∞–∑—á–∏–∫ –æ—Ç–∫–ª–æ–Ω–∏–ª –≤–∞—à –æ—Ç–∫–ª–∏–∫ –Ω–∞ —ç—Ç–æ –∑–∞–¥–∞–Ω–∏–µ.
–í—ã –º–æ–∂–µ—Ç–µ –Ω–∞–π—Ç–∏ –¥—Ä—É–≥–∏–µ –∑–∞–¥–∞–Ω–∏—è –≤ —Ä–∞–∑–¥–µ–ª–µ "–ù–∞–π—Ç–∏ –∑–∞–¥–∞–Ω–∏—è".
```

**–ö–æ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è:**
- –ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ Provider –Ω–∞–∂–∞–ª "–û—Ç–∫–ª–æ–Ω–∏—Ç—å" –≤ —Å–ø–∏—Å–∫–µ –æ—Ç–∫–ª–∏–∫–æ–≤
- `offerStatus === 'declined'`

---

### 2. ‚úÖ –û—Ç–∫–ª–∏–∫ –ø—Ä–∏–Ω—è—Ç (accepted)

**–¶–≤–µ—Ç:** –ó–µ–ª—ë–Ω—ã–π —Ñ–æ–Ω (#d1fae5)

```
‚úÖ –í–∞—à –æ—Ç–∫–ª–∏–∫ –ø—Ä–∏–Ω—è—Ç! üéâ

–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –ó–∞–∫–∞–∑—á–∏–∫ –≤—ã–±—Ä–∞–ª –≤–∞—Å –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è.
–°–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∏–º –≤ —Ä–∞–∑–¥–µ–ª–µ "–í—Ö–æ–¥—è—â–∏–µ" –¥–ª—è –æ–±—Å—É–∂–¥–µ–Ω–∏—è –¥–µ—Ç–∞–ª–µ–π.
```

**–ö–æ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è:**
- –ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ Provider –Ω–∞–∂–∞–ª "–í—ã–±—Ä–∞—Ç—å –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è"
- `offerStatus === 'accepted'`

---

### 3. üîµ –†–∞–±–æ—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ (completed)

**–¶–≤–µ—Ç:** –°–∏–Ω–∏–π —Ñ–æ–Ω (#dbeafe)

```
üîµ –†–∞–±–æ—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞

–í—ã –∑–∞–≤–µ—Ä—à–∏–ª–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —ç—Ç–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è.
–í—ã –º–æ–∂–µ—Ç–µ –æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤ –æ –∑–∞–∫–∞–∑—á–∏–∫–µ –≤ —Ä–∞–∑–¥–µ–ª–µ "–í—Ö–æ–¥—è—â–∏–µ".
```

**–ö–æ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è:**
- –ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ Customer –∑–∞–≤–µ—Ä—à–∏–ª —Ä–∞–±–æ—Ç—É (transition/complete)
- `offerStatus === 'completed'`

---

### 4. ‚è≥ –ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ (pending)

**–¶–≤–µ—Ç:** –°–≤–µ—Ç–ª–æ-–∑–µ–ª—ë–Ω—ã–π —Ñ–æ–Ω (#f0fff4)

```
‚è≥ –ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!

–î–æ–∂–¥–∏—Ç–µ—Å—å –æ—Ç–≤–µ—Ç–∞ –æ—Ç –∑–∞–∫–∞–∑—á–∏–∫–∞.
–í—ã –º–æ–∂–µ—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç—É—Å –≤–∞—à–µ–≥–æ –æ—Ç–∫–ª–∏–∫–∞ –≤ —Ä–∞–∑–¥–µ–ª–µ "–í—Ö–æ–¥—è—â–∏–µ".
```

**–ö–æ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è:**
- –°—Ä–∞–∑—É –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—Ç–∫–ª–∏–∫–∞
- `offerStatus === 'pending'` –∏–ª–∏ `null` (–¥–ª—è —Å—Ç–∞—Ä—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π)

---

### 5. ‚ö†Ô∏è –í—ã–±—Ä–∞–Ω –¥—Ä—É–≥–æ–π –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å

**–¶–≤–µ—Ç:** –û—Ä–∞–Ω–∂–µ–≤—ã–π —Ñ–æ–Ω (#fff7ed)

```
‚ö†Ô∏è –í—ã–±—Ä–∞–Ω –¥—Ä—É–≥–æ–π –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å

–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –∑–∞–∫–∞–∑—á–∏–∫ –≤—ã–±—Ä–∞–ª –¥—Ä—É–≥–æ–≥–æ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è.
```

**–ö–æ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è:**
- –î–ª—è —Å—Ç–∞—Ä—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π (–¥–æ Version 3)
- –ö–æ–≥–¥–∞ `listingStatus === 'in-progress'` –∏ `assignedTo !== currentUserId`

---

## üìä –î–∏–∞–≥—Ä–∞–º–º–∞ —Å—Ç–∞—Ç—É—Å–æ–≤

```
Customer –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç–∫–ª–∏–∫
    ‚Üì
[pending] ‚Üí "–ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞! ‚è≥"
    ‚Üì
    ‚îú‚îÄ‚Üí Provider –ø—Ä–∏–Ω–∏–º–∞–µ—Ç ‚Üí [accepted] ‚Üí "–í–∞—à –æ—Ç–∫–ª–∏–∫ –ø—Ä–∏–Ω—è—Ç! ‚úÖ üéâ"
    ‚îÇ       ‚Üì
    ‚îÇ   [—Ä–∞–±–æ—Ç–∞] ‚Üí Customer –∑–∞–≤–µ—Ä—à–∞–µ—Ç ‚Üí [completed] ‚Üí "–†–∞–±–æ—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ üîµ"
    ‚îÇ
    ‚îî‚îÄ‚Üí Provider –æ—Ç–∫–ª–æ–Ω—è–µ—Ç ‚Üí [declined] ‚Üí "–û—Ç–∫–ª–∏–∫ –æ—Ç–∫–ª–æ–Ω—ë–Ω ‚ùå"
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –æ—Ç–∫–ª–∏–∫–∞

1. **Customer A** —Å–æ–∑–¥–∞—ë—Ç –æ—Ç–∫–ª–∏–∫ –Ω–∞ –∑–∞–¥–∞–Ω–∏–µ
   - –í–∏–¥–∏—Ç: "‚è≥ –ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!"

2. **Provider** (–≤–ª–∞–¥–µ–ª–µ—Ü) –Ω–∞–∂–∏–º–∞–µ—Ç "–û—Ç–∫–ª–æ–Ω–∏—Ç—å"
   - –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ `declined`

3. **Customer A** –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –∑–∞–¥–∞–Ω–∏–µ —Å–Ω–æ–≤–∞
   - –¢–µ–ø–µ—Ä—å –≤–∏–¥–∏—Ç: "‚ùå –û—Ç–∫–ª–∏–∫ –æ—Ç–∫–ª–æ–Ω—ë–Ω"
   - –ú–æ–∂–µ—Ç –Ω–∞–π—Ç–∏ –¥—Ä—É–≥–∏–µ –∑–∞–¥–∞–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü—Ä–∏–Ω—è—Ç–∏–µ –æ—Ç–∫–ª–∏–∫–∞

1. **Customer B** —Å–æ–∑–¥–∞—ë—Ç –æ—Ç–∫–ª–∏–∫
   - –í–∏–¥–∏—Ç: "‚è≥ –ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!"

2. **Provider** –Ω–∞–∂–∏–º–∞–µ—Ç "–í—ã–±—Ä–∞—Ç—å –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è"
   - –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ `accepted`

3. **Customer B** –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –∑–∞–¥–∞–Ω–∏–µ
   - –í–∏–¥–∏—Ç: "‚úÖ –í–∞—à –æ—Ç–∫–ª–∏–∫ –ø—Ä–∏–Ω—è—Ç! üéâ"

---

## üîç API Response Example

### –î–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π:
```json
{
  "data": {
    "hasOffer": true,
    "transactionId": "abc-123"
  }
}
```

### –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π:
```json
{
  "data": {
    "hasOffer": true,
    "transactionId": "abc-123",
    "offerStatus": "declined",
    "lastTransition": "transition/decline-offer"
  }
}
```

---

## üìù –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### Backend:
- ‚úÖ `server/api/check-my-offer.js`
  - –î–æ–±–∞–≤–ª–µ–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ `offerStatus`
  - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `offerStatus` –∏ `lastTransition`

### Frontend:
- ‚úÖ `src/components/OfferForm.jsx`
  - –î–æ–±–∞–≤–ª–µ–Ω state `offerStatus`
  - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ 5 —Ç–∏–ø–æ–≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
  - –£–ª—É—á—à–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤

---

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å** - Customer –≤—Å–µ–≥–¥–∞ –∑–Ω–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å —Å–≤–æ–µ–≥–æ –æ—Ç–∫–ª–∏–∫–∞
2. **UX** - –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å —á–µ—Ç–∫–∏–º–∏ —Ü–≤–µ—Ç–æ–≤—ã–º–∏ –∫–æ–¥–∞–º–∏
3. **–ú–æ—Ç–∏–≤–∞—Ü–∏—è** - –ü—Ä–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–∏ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç—Å—è –Ω–∞–π—Ç–∏ –¥—Ä—É–≥–∏–µ –∑–∞–¥–∞–Ω–∏—è
4. **–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ—Å—Ç—å** - –†–∞–∑–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ç–∞—Ç—É—Å–æ–≤

---

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–¢–µ–ø–µ—Ä—å Customer –ø–æ–ª—É—á–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å—Ç–∞—Ç—É—Å–µ —Å–≤–æ–µ–≥–æ –æ—Ç–∫–ª–∏–∫–∞:
- ‚ùå –ö—Ä–∞—Å–Ω–æ–µ - –æ—Ç–∫–ª–æ–Ω—ë–Ω
- ‚úÖ –ó–µ–ª—ë–Ω–æ–µ - –ø—Ä–∏–Ω—è—Ç
- üîµ –°–∏–Ω–µ–µ - –∑–∞–≤–µ—Ä—à—ë–Ω
- ‚è≥ –°–≤–µ—Ç–ª–æ-–∑–µ–ª—ë–Ω–æ–µ - –æ–∂–∏–¥–∞–Ω–∏–µ

**–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ!**





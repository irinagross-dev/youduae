# 🚀 Быстрый тест всех статусов

## ⚡ За 10 минут проверим все 4 статуса

Перезагрузите сервер перед тестированием:
```bash
yarn run dev
```

---

## 1. ✅ Отклик принят (для выигравшего) - ЗЕЛЕНЫЙ

### Где проверить:
- **ListingPage** (страница задания)
- **OfferForm.jsx** (форма отклика)

### Как проверить:
1. Откройте листинг где вы выиграли (Alex G → Руслан Б принят)
2. Прокрутите вниз до формы отклика

**Должны увидеть:**
```
╔═══════════════════════════════════════════════╗
║ ✅ Вы выбраны исполнителем, работа в процессе ║
║                                               ║
║ Поздравляем! Перейдите в чат для уточнения   ║
║ всех деталей с заказчиком.                   ║
║                                               ║
║          [ Открыть чат → ]                   ║
╚═══════════════════════════════════════════════╝
```

**Цвет:** Ярко-зеленый (#d1fae5)  
**Кнопка:** "Открыть чат →" (ссылка на Inbox)

---

## 2. ❌ Отклик отклонен (для проигравшего) - КРАСНЫЙ

### Где проверить:
- **OfferForm.jsx** (внутри листинга, ниже описания)

### Как проверить:
1. Зайдите как Customer, которому вы отклонили отклик
2. Откройте тот же листинг

**Должны увидеть:**
```
╔════════════════════════════════════════════════╗
║ ❌ Отклик отклонён                            ║
║                                                ║
║ К сожалению, заказчик отклонил ваш отклик     ║
║ на это задание. Вы можете найти другие        ║
║ задания в разделе "Найти задания".            ║
╚════════════════════════════════════════════════╝
```

**Цвет:** Красный (#fee2e2)

---

## 3. ⚠️ Выбран другой исполнитель (для проигравших) - ОРАНЖЕВЫЙ

### Где проверить:
- **ListingPage** (баннер выше формы отклика)

### Как проверить:
1. Зайдите как Customer, который отправил отклик
2. Владелец выбрал ДРУГОГО исполнителя (не вас)
3. Откройте листинг

**Должны увидеть:**
```
╔════════════════════════════════════════════════╗
║ ⚠️ Исполнитель выбран                         ║
║                                                ║
║ К сожалению, заказчик выбрал другого          ║
║ исполнителя для выполнения этого задания.     ║
╚════════════════════════════════════════════════╝
```

**Цвет:** Оранжевый (#fff7ed)

---

## 4. ⏳ Ожидание ответа (pending) - СВЕТЛО-ЗЕЛЕНЫЙ

### Где проверить:
- **OfferForm.jsx** (внутри листинга)

### Как проверить:
1. Зайдите как Customer
2. Отправьте новый отклик на любой листинг
3. Обновите страницу

**Должны увидеть:**
```
╔════════════════════════════════════════════════╗
║ ⏳ Заявка отправлена!                         ║
║                                                ║
║ Дождитесь ответа от заказчика.                ║
║ Вы можете посмотреть статус вашего отклика    ║
║ в разделе "Входящие".                         ║
╚════════════════════════════════════════════════╝
```

**Цвет:** Светло-зеленый (#f0fff4)

---

## 5. 🔵 Работа завершена (completed) - СИНИЙ

### Где проверить:
- **TransactionPage** (раздел "Входящие" → транзакция)

### Как проверить:
1. Зайдите как **Customer** (исполнитель), чей отклик приняли
2. Перейдите в "Входящие" → "Заказы"
3. Откройте принятую транзакцию
4. Нажмите кнопку "Завершить работу"

**До завершения (в TransactionPage):**
- Должна быть кнопка "Завершить работу" (только для Customer!)

**После завершения (в ListingPage):**
```
╔════════════════════════════════════════════════╗
║ 🔵 Работа завершена                           ║
║                                                ║
║ Вы завершили выполнение этого задания.        ║
║ Вы можете оставить отзыв о заказчике          ║
║ в разделе "Входящие".                         ║
╚════════════════════════════════════════════════╝
```

**Цвет:** Синий (#dbeafe)

---

## 🐛 Проверка ошибки 403 (ИСПРАВЛЕНА)

### Сценарий:
1. Зайдите как **Provider** (владелец листинга)
2. Перейдите в "Входящие" → "Продажи"
3. Откройте транзакцию в статусе "accepted"

**Результат:**
- ❌ НЕ должно быть кнопки "Завершить работу"
- ✅ Только Customer (исполнитель) может завершить работу

---

## 📊 Матрица тестирования

| Статус | Пользователь | Место | Цвет | Текст | Кнопка |
|--------|--------------|-------|------|-------|--------|
| Принят | Выигравший Customer | ListingPage | 🟢 Зеленый | "Вы выбраны" | "Открыть чат" |
| Отклонен | Customer | OfferForm | 🔴 Красный | "Отклик отклонён" | - |
| Другой выбран | Проигравший Customer | ListingPage | 🟠 Оранжевый | "Выбран другой" | - |
| Ожидание | Customer | OfferForm | 🟢 Светло-зеленый | "Заявка отправлена" | - |
| Завершено | Customer | OfferForm/TransactionPage | 🔵 Синий | "Работа завершена" | - |

---

## ✅ Критерии успеха

- [ ] Выигравший Customer видит зеленый баннер с кнопкой "Открыть чат"
- [ ] Проигравший Customer видит оранжевый баннер "Выбран другой"
- [ ] Отклоненный Customer видит красный баннер "Отклик отклонён"
- [ ] Новый Customer видит светло-зеленый "Заявка отправлена"
- [ ] После завершения работы Customer видит синий "Работа завершена"
- [ ] Provider НЕ видит кнопку "Завершить работу"
- [ ] Customer видит кнопку "Завершить работу" в TransactionPage
- [ ] Нет ошибки 403 при нажатии "Завершить"

---

## 🔍 Логи для проверки

Откройте DevTools (F12) → Console:

### При открытии ListingPage:
```
🔍 OfferForm: checking existing offer, hasOffer = true, offerStatus = declined
```

### При завершении работы (Customer):
```
🔄 onComplete: starting transition/complete for transaction ...
✅ onComplete: transition successful
```

### Если Provider пытается завершить (НЕ должно быть кнопки):
```
(кнопки не должно быть вообще)
```

---

## 🚀 Готово!

Теперь все статусы работают корректно:
- ✅ Зеленый для выигравших
- ❌ Красный для отклоненных
- ⚠️ Оранжевый для проигравших
- ⏳ Светло-зеленый для ожидающих
- 🔵 Синий для завершенных




